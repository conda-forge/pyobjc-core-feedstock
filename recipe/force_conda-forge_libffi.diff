diff --git a/pyobjc-core/setup.py b/pyobjc-core/setup.py
index 6183ba97e..af7a9bc6d 100644
--- a/pyobjc-core/setup.py
+++ b/pyobjc-core/setup.py
@@ -81,9 +81,10 @@ CFLAGS = [
     # "-fsanitize=address", "-fsanitize=undefined", "-fno-sanitize=vptr",
     # "--analyze",
     "-Werror",
-    "-I/usr/include/ffi",
     # "-fvisibility=hidden",
     # "-O3", "-flto",
+    "-I"+os.path.expandvars('$CONDA_PREFIX')+"/include",
+    "-L"+os.path.expandvars('$CONDA_PREFIX')+"/lib",
 ]
 
 # CFLAGS for other (test) extensions:
@@ -406,6 +407,9 @@ def _working_compiler(executable):
         stdout, stderr = p.communicate()
         status = p.wait()
         if status != 0:
+            print(f"executable:\n{executable}")
+            print(f"stdout:\n{stdout}")
+            print(f"stderr:\n{stderr}")
             return False
 
         binfile = fp.name[:-1] + "o"
